<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QuickFireCalc.io | Financial Independence Plan</title>

    <link rel="canonical" href="https://quickfirecalc.io/" />
    
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "FAQPage",
      "mainEntity": [{
          "@type": "Question",
          "name": "¬øQu√© es la regla del 4% y c√≥mo funciona?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "La regla del 4% es una tasa de retiro segura basada en el Estudio Trinity. Establece que puedes retirar el 4% de tus ahorros el primer a√±o de jubilaci√≥n y ajustar esa cifra por la inflaci√≥n en a√±os posteriores, con una probabilidad del 95% de que el dinero dure al menos 30 a√±os. Se calcula multiplicando tus gastos anuales por 25 para obtener tu meta de capital invertido."
          }
        }, {
        "@type": "Question",
        "name": "¬øC√≥mo se calcula la libertad financiera?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Se calcula multiplicando tus gastos anuales por 25. Este n√∫mero es tu 'Meta FIRE', el capital necesario para vivir de tus rentas siguiendo la regla del 4%."
        }
      }, {
        "@type": "Question",
        "name": "¬øEs posible retirarse joven con poco dinero?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Retirarse joven requiere un enfoque agresivo en el ahorro y la inversi√≥n. No necesitas ser millonario desde el principio, sino construir un patrimonio que genere suficientes ingresos pasivos para cubrir tu costo de vida."
        }
      }, {
        "@type": "Question",
        "name": "¬øQu√© es Fat FIRE vs Lean FIRE?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Lean FIRE se refiere a retirarse con un presupuesto ajustado y gastos m√≠nimos, mientras que Fat FIRE implica un retiro con un estilo de vida m√°s holgado y un capital invertido mucho mayor."
        }
      }, {
        "@type": "Question",
        "name": "¬øC√≥mo afecta la inflaci√≥n a mi retiro?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "La inflaci√≥n reduce el poder adquisitivo con el tiempo. Por ello, es fundamental invertir en activos que hist√≥ricamente superen la inflaci√≥n, como acciones, y ajustar los retiros anuales seg√∫n el IPC."
        }
      }]
    }
    </script>

    <script async src="https://www.googletagmanager.com/gtag/js?id=G-58PZ014PSE"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-58PZ014PSE');
    </script>

    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3260754461974066"
     crossorigin="anonymous"></script>

    <meta name="google-adsense-account" content="ca-pub-3260754461974066">

    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;800&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="icon" type="image/x-icon" href="favicon.ico">

    <style>
     :root { 
            --primary: #2563eb; --secondary: #10b981; --danger: #ef4444; --dark: #0f172a; --gray: #64748b; --bg: #f8fafc; 
            --card-bg: white; --text-color: var(--dark); --border-color: #eef2f6;
        }

        body.dark-mode {
            --bg: #0f172a; --card-bg: #1e293b; --text-color: #f8fafc; --border-color: #334155; --gray: #94a3b8;
        }

        @media (prefers-color-scheme: dark) {
            body:not(.light-mode):not(.manual-mode) {
                --bg: #0f172a; --card-bg: #1e293b; --text-color: #f8fafc; --border-color: #334155; --gray: #94a3b8;
            }
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: 'Plus Jakarta Sans', sans-serif; background: var(--bg); color: var(--text-color); line-height: 1.7; padding: 0 20px; transition: background 0.3s, color 0.3s; }
        
        .container { max-width: 1000px; margin: 0 auto; }
        .header-nav { display: flex; justify-content: space-between; align-items: center; padding: 30px 0; }
        .logo { font-weight: 800; font-size: 1.5rem; color: var(--primary); text-decoration: none; }
        
        .nav-controls { display: flex; align-items: center; gap: 12px; }
        .lang-switcher { display: flex; gap: 5px; }
        
        .btn-control { 
            background: var(--card-bg); border: 1px solid var(--border-color); color: var(--text-color); 
            padding: 8px 12px; border-radius: 10px; cursor: pointer; font-weight: 700; font-size: 0.75rem; transition: 0.2s; 
            display: flex; align-items: center; justify-content: center;
        }
        .btn-control.active { background: var(--primary); color: white; border-color: var(--primary); }

        .main-grid { display: grid; grid-template-columns: 360px 1fr; gap: 20px; margin-bottom: 20px; }
        @media (max-width: 900px) { .main-grid { grid-template-columns: 1fr; } }

        .card { 
            background: var(--card-bg); padding: 25px; border-radius: 24px; border: 1px solid var(--border-color); 
            box-shadow: 0 4px 20px rgba(0,0,0,0.02); transition: transform 0.3s ease;
        }
        .card:hover { transform: translateY(-3px); }

        h1 { font-size: 1.6rem; margin-bottom: 5px; font-weight: 800; letter-spacing: -0.5px; }
        .subtitle { font-size: 0.9rem; color: var(--gray); margin-bottom: 20px; font-weight: 400; }

        .input-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; font-weight: 600; font-size: 0.85rem; color: var(--gray); }
        .input-wrapper { position: relative; }
        .input-wrapper span { position: absolute; left: 14px; top: 50%; transform: translateY(-50%); color: var(--gray); font-weight: 700; }
        
        input { 
            width: 100%; padding: 12px 12px 12px 35px; border: 2px solid var(--border-color); border-radius: 12px; 
            font-size: 1rem; font-weight: 700; outline: none; transition: 0.3s; 
            background: var(--bg); color: var(--text-color);
        }

        .action-buttons { display: flex; gap: 10px; margin: 20px 0; }
        .panic-btn { 
            flex: 1; background: linear-gradient(135deg, #1e293b 0%, #475569 100%); color: white; border: none; 
            padding: 12px; border-radius: 12px; font-weight: 800; cursor: pointer; font-size: 0.85rem; transition: 0.3s;
        }
        .panic-btn:hover { filter: brightness(1.2); }

        .reset-btn { background: var(--card-bg); color: var(--secondary); border: 2px solid var(--secondary); padding: 12px; border-radius: 12px; cursor: pointer; display: none; }

        .result-box { background: var(--primary); padding: 25px; border-radius: 20px; text-align: center; color: white; }
        #fire-date { font-size: 2.2rem; font-weight: 800; display: block; }
        .stats-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 15px; }
        .stat-card { background: rgba(255,255,255,0.15); padding: 10px; border-radius: 12px; }
        .stat-label { font-size: 0.6rem; text-transform: uppercase; font-weight: 700; display: block; }

        .chart-container { background: var(--card-bg); padding: 25px; border-radius: 24px; border: 1px solid var(--border-color); position: relative; height: 480px; width: 100%; }

        .seo-article { background: var(--card-bg); padding: 40px; border-radius: 24px; border: 1px solid var(--border-color); margin-top: 10px; margin-bottom: 40px; }
        .seo-article h2 { font-size: 1.5rem; margin-bottom: 20px; font-weight: 800; }
        .seo-article h3 { font-size: 1.1rem; margin: 25px 0 10px; color: var(--primary); font-weight: 700; }
        .faq-section { margin-top: 30px; border-top: 1px solid var(--border-color); padding-top: 20px; }
        .faq-item { margin-bottom: 20px; }
        .faq-item b { display: block; color: var(--primary); margin-bottom: 5px; font-size: 1rem; }

        .ad-placeholder { background: var(--bg); border: 1px dashed var(--gray); border-radius: 12px; padding: 15px; text-align: center; color: var(--gray); font-size: 0.7rem; margin-bottom: 20px; text-transform: uppercase; }

        footer { text-align: center; padding: 40px 0; border-top: 1px solid var(--border-color); color: var(--gray); font-size: 0.85rem; }
        footer a { color: var(--primary); text-decoration: none; font-weight: 600; margin: 0 10px; }

        #cookie-banner { position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%); width: 90%; max-width: 800px; background: #0f172a; color: white; padding: 15px 25px; border-radius: 16px; display: flex; justify-content: space-between; align-items: center; z-index: 100; font-size: 0.8rem; }
    </style>
</head>
<body id="body">

<div id="cookie-banner">
    <p id="cookie-text">Usamos cookies para mejorar tu experiencia. <a href="privacy.html" style="color: var(--secondary);">Info</a></p>
    <button style="background:var(--primary); color:white; border:none; padding:8px 16px; border-radius:8px; cursor:pointer; font-weight:700;" onclick="acceptCookies()">OK</button>
</div>

<div class="container">
    <header class="header-nav">
        <a href="/" class="logo">üöÄ QuickFireCalc.io</a>
        <div class="nav-controls">
            <button class="btn-control" onclick="toggleDarkMode()" title="Modo">
                <span id="theme-icon">üåô</span>
            </button>
            <div class="lang-switcher">
                <button class="btn-control" id="btn-es" onclick="switchLang('es')">ESP</button>
                <button class="btn-control" id="btn-en" onclick="switchLang('en')">ENG</button>
            </div>
        </div>
    </header>

    <div class="ad-placeholder">Ad Space - Top</div>

    <main class="main-grid">
        <section class="card">
            <h1 id="txt-h1">Libertad Financiera</h1>
            <p id="txt-subtitle" class="subtitle">Tu mapa hacia el retiro anticipado.</p>
            
            <div class="input-group">
                <label id="txt-label-spend">Gasto Mensual ($)</label>
                <div class="input-wrapper"><span>$</span><input type="number" id="spend" value="2000" oninput="calculate()"></div>
            </div>
            <div class="input-group">
                <label id="txt-label-cap">Capital Inicial ($)</label>
                <div class="input-wrapper"><span>$</span><input type="number" id="capital" value="10000" oninput="calculate()"></div>
            </div>
            <div class="input-group">
                <label id="txt-label-save">Ahorro Mensual ($)</label>
                <div class="input-wrapper"><span>+</span><input type="number" id="save" value="500" oninput="calculate()"></div>
            </div>
            <div class="input-group">
                <label id="txt-label-ret">Rentabilidad (%)</label>
                <div class="input-wrapper"><span>%</span><input type="number" id="return" value="7" oninput="calculate()"></div>
            </div>

            <div class="action-buttons">
                <button class="panic-btn" id="txt-panic" onclick="applyPanic()">‚ö†Ô∏è CRASH MERCADO</button>
                <button class="reset-btn" id="reset-btn" onclick="resetPanic()">üîÑ</button>
            </div>

            <div class="result-box">
                <span id="txt-res-label" style="font-size: 0.7rem; font-weight: 800; opacity: 0.9;">TIEMPO PARA EL RETIRO</span>
                <span id="fire-date">-</span>
                <div class="stats-grid">
                    <div class="stat-card">
                        <span class="stat-label">FI Ratio</span>
                        <span id="fi-ratio" class="stat-value">0%</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-label" id="txt-meta-label">Meta Total</span>
                        <span id="target-val" class="stat-value">$0</span>
                    </div>
                </div>
            </div>
        </section>

        <section>
            <div class="chart-container">
                <canvas id="fireChart"></canvas>
            </div>
            <div class="ad-placeholder" style="margin-top:20px">Ad Space - Mid</div>
        </section>
    </main>

    
<article class="seo-article">
    <div id="seo-content"></div>
    <div class="ad-placeholder" style="margin-top: 30px;">AD SPACE - BOTTOM</div>
</article>

    <footer>
        <a href="privacy.html">Privacy</a> | <a href="legal.html">Legal</a> | <a href="cookies.html">Cookies</a>
        <p style="margin-top: 15px;">&copy; 2026 QuickFireCalc.io</p>
    </footer>
</div>

<script>
    let panic = 1;
    let currentLang = localStorage.getItem('lang') || 'es';
    let fireChart;

    const translations = {
        es: {
            h1: "Libertad Financiera", subtitle: "Tu mapa hacia el retiro anticipado.",
            labelSpend: "Gasto Mensual ($)", labelCap: "Capital Inicial ($)",
            labelSave: "Ahorro Mensual ($)", labelRet: "Rentabilidad (%)", panic: "‚ö†Ô∏è CRASH MERCADO",
            resLabel: "TIEMPO PARA EL RETIRO", metaLabel: "Meta Total", free: "¬°LIBRE!",
            chartInc: "Ingresos Pasivos (4%)", chartExp: "Gastos Anuales",
            cookie: "Usamos cookies para mejorar tu experiencia. ",
            article: `<h2>¬øQu√© es el Movimiento FIRE?</h2>
            <p>El movimiento <b>FIRE</b> (Financial Independence, Retire Early) es una estrategia que busca la libertad financiera mediante el ahorro agresivo y la inversi√≥n inteligente. Nuestra calculadora utiliza la <b>Regla del 4%</b> para determinar cu√°ndo tus activos pueden cubrir tus gastos anuales de por vida.</p>
            <h3>C√≥mo usar este simulador</h3>
            <p>Introduce tus gastos mensuales actuales y tu capital disponible. Ver√°s c√≥mo el <b>inter√©s compuesto</b> trabaja a tu favor. El gr√°fico muestra la intersecci√≥n entre tus gastos anuales (l√≠nea roja) y tus ingresos pasivos proyectados (l√≠nea azul). Cuando la l√≠nea azul cruza a la roja, eres financieramente libre.</p>
            <h3>Riesgo y Volatilidad</h3>
            <p>Los mercados no siempre suben. Por eso hemos incluido el bot√≥n <b>Market Crash</b>, que simula una ca√≠da del 50%. Un plan s√≥lido debe resistir estas volatilidades. Es recomendable mantener un colch√≥n de efectivo para evitar vender activos durante las crisis.</p>
            <section class="faq-section">
                <h3>Preguntas Frecuentes (FAQ)</h3>
                <div class="faq-item">
                             <b>¬øQu√© es la regla del 4%?</b>
                    <p>La <strong>regla del 4%</strong> es una de las piedras angulares del movimiento FIRE y se utiliza para determinar la <strong>tasa de retiro segura</strong> durante la jubilaci√≥n. Su origen se encuentra en el c√©lebre <strong>Estudio Trinity</strong> (1998), donde tres profesores de la Universidad de Trinity analizaron datos hist√≥ricos de los mercados financieros para encontrar cu√°nto dinero podr√≠a retirar un jubilado de su cartera sin agotar sus ahorros prematuramente.</p>
                    <p>En t√©rminos sencillos, la regla establece que si inviertes tus ahorros en una combinaci√≥n equilibrada de acciones y bonos, puedes retirar el <strong>4% de tu capital total durante el primer a√±o</strong> de retiro. Para los a√±os siguientes, simplemente ajustas esa cantidad inicial seg√∫n la inflaci√≥n, independientemente de si el mercado ha subido o bajado. Siguiendo este m√©todo, el estudio demostr√≥ que existe una probabilidad superior al <strong>95%</strong> de que tu patrimonio dure al menos 30 a√±os en la mayor√≠a de los escenarios hist√≥ricos.</p>
                    <p>Por ejemplo, si tu meta es acumular <strong>$600,000</strong>, el primer a√±o podr√≠as retirar <strong>$24,000</strong>. Si la inflaci√≥n ese a√±o es del 3%, el segundo a√±o retirar√≠as $24,720, y as√≠ sucesivamente. Esta regla es extremadamente √∫til porque permite calcular r√°pidamente tu "N√∫mero FIRE": solo necesitas multiplicar tus gastos anuales deseados por 25. Aunque es una gu√≠a excelente, es importante revisarla peri√≥dicamente para adaptarse a contextos de rentabilidades bajas o inflaciones excepcionalmente altas.</p>
                </div>
                <div class="faq-item">
                    <b>¬øC√≥mo calculo mi Meta FIRE?</b>
                    <p>La forma m√°s r√°pida es multiplicar tus gastos anuales por 25. Ese es el capital necesario para ser libre financieramente.</p>
                </div>
                <div class="faq-item">
                    <b>¬øQu√© papel juega la inflaci√≥n?</b>
                    <p>La inflaci√≥n reduce tu poder de compra. Es vital usar una rentabilidad neta (rentabilidad menos inflaci√≥n) para que los c√°lculos sean realistas.</p>
                </div>
                <div class="faq-item">
                    <b>¬øEs mejor ahorrar m√°s o invertir mejor?</b>
                    <p>Al principio, tu tasa de ahorro es el factor m√°s determinante. Con el tiempo, el inter√©s compuesto hace que la rentabilidad gane peso.</p>
                </div>
            </section>`
        },
        en: {
            h1: "Financial Freedom", subtitle: "Your roadmap to early retirement.",
            labelSpend: "Monthly Spending ($)", labelCap: "Initial Capital ($)",
            labelSave: "Monthly Savings ($)", labelRet: "Annual Return (%)", panic: "‚ö†Ô∏è MARKET CRASH",
            resLabel: "TIME TO RETIRE", metaLabel: "Total Target", free: "FREE!",
            chartInc: "Passive Income (4%)", chartExp: "Annual Expenses",
            cookie: "We use cookies to improve your experience. ",
            article: `<h2>What is the FIRE Movement?</h2>
            <p>The <b>FIRE</b> (Financial Independence, Retire Early) movement is a strategy that seeks financial freedom through aggressive saving and smart investing. Our calculator uses the <b>4% Rule</b> to determine when your assets can cover your annual expenses for life.</p>
            <h3>How to use this simulator</h3>
            <p>Enter your current monthly expenses and your available capital. You'll see how <b>compound interest</b> works in your favor. The chart shows the intersection between your annual expenses (red line) and your projected passive income (blue line). When the blue line crosses the red line, you are financially free.</p>
            <h3>Risk and Volatility</h3>
            <p>Markets don't always go up. That's why we've included the <b>Market Crash</b> button, which simulates a 50% drop. A solid plan must withstand these volatilities. It is advisable to maintain a cash cushion to avoid selling assets during market downturns.</p>
            <section class="faq-section">
                <h3>Frequently Asked Questions (FAQ)</h3>
                <div class="faq-item">
                    <b>What is the 4% rule and how does it work?</b>
                    <p>The <strong>4% rule</strong> is a cornerstone of the FIRE movement and is used to determine the <strong>safe withdrawal rate</strong> during retirement. Its origin lies in the famous <strong>Trinity Study</strong> (1998), where historical data was analyzed to find how much money a retiree could withdraw without running out of savings.</p>
                    <p>It states that you can withdraw <strong>4% of your total capital during the first year</strong> of retirement and adjust the figure for inflation in subsequent years. Following this method, there is a greater than <strong>95%</strong> probability that your wealth will last at least 30 years.</p>
                    <p>For example, if your goal is to accumulate <strong>$600,000</strong>, the first year you could withdraw <strong>$24,000</strong>. If inflation that year is 3%, the second year you would withdraw $24,720, and so on. This rule is extremely useful because it allows you to quickly calculate your "FIRE Number": you just need to multiply your desired annual expenses by 25. Although it's an excellent guideline, it's important to review it periodically to adapt to contexts of low returns or exceptionally high inflation.</p>
                </div>
                <div class="faq-item">
                    <b>How do I calculate my FIRE Goal?</b>
                    <p>The fastest way is to multiply your annual expenses by 25. This is the capital needed to be financially free.</p>
                </div>
                <div class="faq-item">
                    <b>What role does inflation play?</b>
                    <p>Inflation reduces your purchasing power. It is vital to use a net return (return minus inflation) to make the calculations realistic.</p>
                </div>
                <div class="faq-item">
                    <b>Is it better to save more or invest better?</b>
                    <p>At the beginning, your savings rate is the most determining factor. Over time, compound interest makes investment returns more significant.</p>
                </div>
            </section>`
        }
    };

    function toggleDarkMode() {
        const body = document.getElementById('body');
        const icon = document.getElementById('theme-icon');
        const isDark = body.classList.toggle('dark-mode');
        localStorage.setItem('theme', isDark ? 'dark' : 'light');
        icon.innerText = isDark ? '‚òÄÔ∏è' : 'üåô';
        if(fireChart) {
            const color = isDark ? '#94a3b8' : '#64748b';
            fireChart.options.scales.x.ticks.color = color;
            fireChart.options.scales.y.ticks.color = color;
            fireChart.update();
        }
    }

    function initChart() {
        const ctx = document.getElementById('fireChart').getContext('2d');
        const isDark = document.body.classList.contains('dark-mode') || window.matchMedia('(prefers-color-scheme: dark)').matches;
        const color = isDark ? '#94a3b8' : '#64748b';

        fireChart = new Chart(ctx, {
            type: 'line',
            data: {
                labels: [],
                datasets: [
                    { label: '', data: [], borderColor: '#2563eb', backgroundColor: 'rgba(37, 99, 235, 0.05)', fill: true, tension: 0.4, borderWidth: 3, pointRadius: 0 },
                    { label: '', borderColor: '#ef4444', borderDash: [5, 5], fill: false, borderWidth: 2, pointRadius: 0 }
                ]
            },
            options: { 
                responsive: true, maintainAspectRatio: false,
                scales: {
                    y: { ticks: { color: color } },
                    x: { ticks: { color: color } }
                }
            }
        });
    }

    function calculate() {
        const t = translations[currentLang];
        const spend = (parseFloat(document.getElementById('spend').value) || 0) * 12;
        const cap = (parseFloat(document.getElementById('capital').value) || 0) * panic;
        const save = parseFloat(document.getElementById('save').value) || 0;
        const rate = (parseFloat(document.getElementById('return').value) || 0) / 100;
        const target = spend * 25;

        document.getElementById('fi-ratio').innerText = target > 0 ? Math.min((cap/target)*100, 100).toFixed(1) + "%" : "0%";
        document.getElementById('target-val').innerText = "$" + target.toLocaleString();

        let labels = [], dInc = [], dExp = [], tCap = cap;
        for (let y = 0; y <= 40; y++) {
            labels.push(y); dExp.push(spend); dInc.push(Math.round(tCap * 0.04));
            for(let m = 0; m < 12; m++) tCap = (tCap + save) * (1 + (rate/12));
        }

        let months = 0, cCap = cap;
        if ((save*12 + cCap*rate) > 0) {
            while(cCap < target && months < 1200) { cCap = (cCap + save) * (1 + (rate/12)); months++; }
        }

        const yrs = Math.floor(months / 12), mths = months % 12;
        document.getElementById('fire-date').innerText = cap >= target ? t.free : (months >= 1200 ? "‚àû" : `${yrs}${currentLang==='es'?'a':'y'} ${mths}m`);
        
        fireChart.data.labels = labels;
        fireChart.data.datasets[0].data = dInc;
        fireChart.data.datasets[0].label = t.chartInc;
        fireChart.data.datasets[1].data = dExp;
        fireChart.data.datasets[1].label = t.chartExp;
        fireChart.update('none');
    }

   function switchLang(lang) {
        currentLang = lang;
        localStorage.setItem('lang', lang);
        const t = translations[lang];
        
        // Actualizamos todos los textos del DOM
        document.getElementById('txt-h1').innerText = t.h1;
        document.getElementById('txt-subtitle').innerText = t.subtitle;
        document.getElementById('txt-label-spend').innerText = t.labelSpend;
        document.getElementById('txt-label-cap').innerText = t.labelCap;
        document.getElementById('txt-label-save').innerText = t.labelSave;
        document.getElementById('txt-label-ret').innerText = t.labelRet;
        document.getElementById('txt-panic').innerText = t.panic;
        document.getElementById('txt-res-label').innerText = t.resLabel;
        document.getElementById('txt-meta-label').innerText = t.metaLabel;
        
        // Esta l√≠nea es la que rellena el div que dejaste vac√≠o
        document.getElementById('seo-content').innerHTML = t.article;
        
        document.getElementById('btn-es').classList.toggle('active', lang === 'es');
        document.getElementById('btn-en').classList.toggle('active', lang === 'en');

        // Solo calculamos si el gr√°fico ya se inicializ√≥
        if(fireChart) calculate();
    }

    window.onload = () => {
        // 1. Tema
        const savedTheme = localStorage.getItem('theme');
        if (savedTheme === 'dark') {
            document.getElementById('body').classList.add('dark-mode');
            document.getElementById('theme-icon').innerText = '‚òÄÔ∏è';
        }
        
        // 2. INICIALIZAR GR√ÅFICO (Primero)
        initChart();

        // 3. CARGAR IDIOMA (Segundo)
        // Esto rellenar√° el HTML vac√≠o autom√°ticamente
        const langToLoad = localStorage.getItem('lang') || 'es';
        switchLang(langToLoad);
        
        // 4. Cookies
        if(localStorage.getItem('fire-cookies')) {
            document.getElementById('cookie-banner').style.display = 'none';
        }
    };
</script>
</body>
</html>
